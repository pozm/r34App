(window.webpackJsonp=window.webpackJsonp||[]).push([[0,5,8,9,10,20],{204:function(e,t,r){"use strict";r.r(t);var o={props:{errorTitle:{type:String,default:"Error"},errorData:{type:String,default:"Something went wrong"},showAction:{type:Boolean,default:!0},renderBorders:{type:Boolean,default:!0}},methods:{reload(){location.reload()}}},n=r(7),component=Object(n.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-4 m-6 text-center text-gray-200",class:{"material-container":e.renderBorders}},[t("h1",{staticClass:"px-2 mx-auto text-2xl font-bold leading-normal tracking-wide border border-white w-max"},[e._v("\n    "+e._s(e.errorTitle)+"\n  ")]),e._v(" "),t("p",{staticClass:"mt-2"},[e._v("\n    "+e._s(e.errorData)+"\n  ")]),e._v(" "),e.showAction?[e._t("customAction",(function(){return[t("button",{staticClass:"link",attrs:{type:"button"},on:{click:function(t){return e.reload()}}},[e._v("\n        Reload the page?\n      ")])]}))]:e._e()],2)}),[],!1,null,null,null);t.default=component.exports},209:function(e,t,r){"use strict";function o(e,t,r){var o;const n=null===(o=e._observe)||void 0===o?void 0:o[r.context._uid];n&&(n.observer.unobserve(e),delete e._observe[r.context._uid])}r.d(t,"a",(function(){return n}));const n={inserted:function(e,t,r){if("undefined"==typeof window||!("IntersectionObserver"in window))return;const n=t.modifiers||{},l=t.value,{handler:c,options:d}="object"==typeof l?l:{handler:l,options:{}},f=new IntersectionObserver(((l=[],d)=>{var f;const v=null===(f=e._observe)||void 0===f?void 0:f[r.context._uid];if(!v)return;const m=l.some((e=>e.isIntersecting));!c||n.quiet&&!v.init||n.once&&!m&&!v.init||c(l,d,m),m&&n.once?o(e,t,r):v.init=!0}),d);e._observe=Object(e._observe),e._observe[r.context._uid]={init:!1,observer:f},f.observe(e)},unbind:o}},210:function(e,t,r){e.exports={}},212:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));class o{static proxyUrl(e){return window.$nuxt.$config.PROXY_URL+encodeURIComponent(e)}}},218:function(e,t,r){"use strict";r(210)},225:function(e,t,r){"use strict";r.r(t);r(10);var o=r(3),n=r(4),l=(r(38),r(33),r(5)),c=r(86),d=r(209),f=r(29),v=r(212);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={components:{ExternalLinkIcon:c.f,TagIcon:c.k},directives:{Intersect:d.a},props:{post:{type:Object,required:!0},eventOnly:{type:Boolean,default:!1}},data:()=>({isActive:!1,media:{hasLoaded:!1,retryLogic:{count:0,tried:{extraSlash:!1,proxy:!1,proxyWithExtraSlash:!1}}},error:{show:!1,message:"An error ocurred."}}),computed:y(y(y({},Object(l.c)("user",["getUserSettings"])),Object(l.c)("booru",["getActiveBooru"])),{},{isImage(){return"image"===this.post.data.media_type},isVideo(){return"video"===this.post.data.media_type},isSourceAnUrl(){if(!this.post.data.sources.length)return!1;var source;try{source=new URL(this.post.data.sources[0])}catch(e){return!1}return"http:"===source.protocol||"https:"===source.protocol},mediaFile(){return this.isVideo&&this.post.data.high_res_file?[this.post.data.high_res_file,this.post.data.preview_file]:!this.post.data.low_res_file.url||this.getUserSettings.fullSizeImages.value?[this.post.data.high_res_file,null]:[this.post.data.low_res_file,null]}}),created(){if(!this.isVideo&&!this.isImage){var e="Unknown media type.";console.warn(e),this.error.message=e,this.error.show=!0}if(!this.post.data.high_res_file.url&&!this.post.data.low_res_file.url){var t="No media available.";console.warn(t),this.error.message=t,this.error.show=!0}},beforeDestroy(){if(this.isImage){var e=this.$refs.imageElement;e&&(e.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",e.onload=null,e.onerror=null)}},methods:{generatePostsRouteWithDefaults:f.a.generatePostsRouteWithDefaults,getHostnameFromUrl:e=>new URL(e).hostname,toggleTags(){this.isActive=!this.isActive},emitTagSelected(e){this.$emit("tag-selected",e)},retryToLoadManager(e){var t=this;return Object(o.a)((function*(){if(t.error.show){console.warn("An error is set.")}else{if(t.$nuxt.isOffline){var r="Browser is offline.";return console.warn(r),t.error.message=r,void(t.error.show=!0)}if(t.media.retryLogic.tried.extraSlash)if(t.media.retryLogic.tried.proxy)if(t.media.retryLogic.tried.proxyWithExtraSlash)if(t.media.retryLogic.count<1)console.info("Retry number ".concat(t.media.retryLogic.count," to load the media")),e.target.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",e.target.src=t.mediaFile[0].url,t.isVideo&&(console.info("Reloading data and playing video"),e.target.parentElement.load(),yield e.target.parentElement.play()),t.media.retryLogic.count++;else{var o="Can not load media.";console.warn(o),t.error.message=o,t.error.show=!0}else console.info("Proxying media with extra slash..."),e.target.src=v.a.proxyUrl(t.addExtraSlashToURL(t.mediaFile[0].url)),t.isVideo&&(console.info("Reloading data and playing video"),e.target.parentElement.load(),yield e.target.parentElement.play()),t.media.retryLogic.tried.proxyWithExtraSlash=!0;else console.info("Proxying media..."),e.target.src=v.a.proxyUrl(t.mediaFile[0].url),t.isVideo&&(console.info("Reloading data and playing video"),e.target.parentElement.load(),yield e.target.parentElement.play()),t.media.retryLogic.tried.proxy=!0;else console.info("Adding extra slash..."),e.target.src=t.addExtraSlashToURL(t.mediaFile[0].url),t.isVideo&&(console.info("Reloading data and playing video"),e.target.parentElement.load(),yield e.target.parentElement.play()),t.media.retryLogic.tried.extraSlash=!0}}))()},VideoOutOfViewHandler(){var e=this;return Object(o.a)((function*(){var t=e.$refs.videoElement;t&&(t.paused||(console.debug("Pausing video."),yield t.pause()))}))()},addExtraSlashToURL(e){var t=new URL(e);return t.toString().replace(t.hostname,t.hostname+"/")}}},O=r(7),component=Object(O.a)(h,(function(){var e=this,t=e._self._c;return t("figure",{staticClass:"material-container"},[e.error.show?[t("Error",{attrs:{"error-data":e.error.message,"render-borders":!1,"show-action":!1}})]:e.isImage?[t("div",{staticClass:"flex overflow-hidden"},[t("button",{staticClass:"relative w-full h-auto pointer-events-auto group",attrs:{"aria-expanded":e.isActive,"aria-label":"Toggle tags panel",type:"button"},on:{click:e.toggleTags,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toggleTags.apply(null,arguments)}}},[t("img",{key:e.mediaFile[0].url,ref:"imageElement",staticClass:"w-full h-auto transition-opacity duration-700 opacity-0",class:{"opacity-100":e.media.hasLoaded},attrs:{alt:"Image "+e.post.data.id,height:e.mediaFile[0].height,src:e.mediaFile[0].url,width:e.mediaFile[0].width,decoding:"async",loading:"lazy",referrerpolicy:"no-referrer"},on:{error:e.retryToLoadManager,load:function(t){e.media.hasLoaded=!0}}}),e._v(" "),t("div",{staticClass:"absolute inset-0 pointer-events-none ring-inset group-focus:focus-util"})])])]:e.isVideo?[t("div",{directives:[{name:"intersect",rawName:"v-intersect",value:{handler:e.VideoOutOfViewHandler,options:{threshold:[0]}},expression:"{\n        handler: VideoOutOfViewHandler,\n        options: {\n          threshold: [0],\n        },\n      }"}],staticClass:"relative"},[t("video",{key:e.mediaFile[0].url,ref:"videoElement",staticClass:"w-full h-auto",attrs:{poster:e.mediaFile[1].url,controls:"",loop:"",playsinline:"",preload:"none"}},[t("source",{attrs:{src:e.mediaFile[0].url},on:{error:e.retryToLoadManager}}),e._v("\n        Your browser does not support HTML5 video.\n      ")]),e._v(" "),t("div",{staticClass:"absolute inset-y-0 right-0 p-4 pointer-events-none"},[t("div",{staticClass:"flex flex-col items-center justify-center w-full h-full"},[t("button",{staticClass:"p-1 bg-black border border-transparent rounded-lg pointer-events-auto bg-opacity-40 group focus:focus-util",attrs:{"aria-expanded":e.isActive,"aria-label":"Toggle tags panel",type:"button"},on:{click:e.toggleTags,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toggleTags.apply(null,arguments)}}},[t("TagIcon",{staticClass:"w-5 h-5 text-gray-200 transition-colors duration-300 icon group-hover:text-white"})],1)])])])]:e._e(),e._v(" "),t("figcaption",{staticClass:"flex flex-wrap overflow-hidden text-sm"},[[t("div",{staticClass:"w-full overflow-hidden"},[t("TransitionCollapse",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[t("div",{staticClass:"flex items-center bg-darkGray-100 justify-evenly"},[e.error.show?e._e():[e.isVideo?e._e():[t("PostSaucenao",{attrs:{"media-url":e.mediaFile[0].url}})],e._v(" "),t("PostDownload",{attrs:{"media-name":e.post.id,"media-url":e.mediaFile[0].url}}),e._v(" "),t("PostSavedPosts",{attrs:{post:e.post}})]],2),e._v(" "),t("div",{staticClass:"min-w-full tag-container"},[e._l(e.post.data.tags.character,(function(r){return[e.eventOnly?[t("button",{key:r,staticClass:"tag link",attrs:{type:"button"},on:{click:function(t){return e.emitTagSelected(r)}}},[e._v("\n                    "+e._s(r)+"\n                  ")])]:[t("NuxtLink",{key:r,staticClass:"tag link",attrs:{to:e.generatePostsRouteWithDefaults(e.$nuxt.$store,void 0,void 0,[r])}},[e._v("\n                    "+e._s(r)+"\n                  ")])]]})),e._v(" "),e._l(e.post.data.tags.copyright,(function(r){return[e.eventOnly?[t("button",{key:r,staticClass:"tag link",attrs:{type:"button"},on:{click:function(t){return e.emitTagSelected(r)}}},[e._v("\n                    "+e._s(r)+"\n                  ")])]:[t("NuxtLink",{key:r,staticClass:"tag link",attrs:{to:e.generatePostsRouteWithDefaults(e.$nuxt.$store,void 0,void 0,[r])}},[e._v("\n                    "+e._s(r)+"\n                  ")])]]})),e._v(" "),e._l(e.post.data.tags.artist,(function(r){return[e.eventOnly?[t("button",{key:r,staticClass:"tag link",attrs:{type:"button"},on:{click:function(t){return e.emitTagSelected(r)}}},[e._v("\n                    "+e._s(r)+"\n                  ")])]:[t("NuxtLink",{key:r,staticClass:"tag link",attrs:{to:e.generatePostsRouteWithDefaults(e.$nuxt.$store,void 0,void 0,[r])}},[e._v("\n                    "+e._s(r)+"\n                  ")])]]})),e._v(" "),e._l(e.post.data.tags.general,(function(r){return[e.eventOnly?[t("button",{key:r,staticClass:"tag link",attrs:{type:"button"},on:{click:function(t){return e.emitTagSelected(r)}}},[e._v("\n                    "+e._s(r)+"\n                  ")])]:[t("NuxtLink",{key:r,staticClass:"tag link",attrs:{to:e.generatePostsRouteWithDefaults(e.$nuxt.$store,void 0,void 0,[r])}},[e._v("\n                    "+e._s(r)+"\n                  ")])]]})),e._v(" "),e._l(e.post.data.tags.meta,(function(r){return[e.eventOnly?[t("button",{key:r,staticClass:"tag link",attrs:{type:"button"},on:{click:function(t){return e.emitTagSelected(r)}}},[e._v("\n                    "+e._s(r)+"\n                  ")])]:[t("NuxtLink",{key:r,staticClass:"tag link",attrs:{to:e.generatePostsRouteWithDefaults(e.$nuxt.$store,void 0,void 0,[r])}},[e._v("\n                    "+e._s(r)+"\n                  ")])]]}))],2)])])],1)],e._v(" "),e.post.data.sources.length?[t("div",{staticClass:"w-full p-1 text-center"},[e.isSourceAnUrl?[t("a",{staticClass:"inline-flex gap-2 link",attrs:{href:e.post.data.sources[0],rel:"noopener nofollow",target:"_blank"}},[t("p",{staticClass:"link"},[e._v("\n              "+e._s(e.getHostnameFromUrl(e.post.data.sources[0]))+"\n            ")]),e._v(" "),t("ExternalLinkIcon",{staticClass:"w-5 h-5 icon"})],1)]:[t("p",{staticClass:"text-gray-200",attrs:{title:"Source"}},[e._v("\n            "+e._s(e.post.data.sources[0])+"\n          ")])]],2)]:e._e()],2)],2)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Error:r(204).default,PostSaucenao:r(226).default,PostDownload:r(227).default,PostSavedPosts:r(228).default,TransitionCollapse:r(229).default})},226:function(e,t,r){"use strict";r.r(t);r(10);var o=r(4),n=r(5),l=r(86);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var d={props:{mediaUrl:{type:String,required:!0}},components:{SearchIcon:l.j},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(n.c)("premium",["isUserPremium"]))},f=d,v=r(7),component=Object(v.a)(f,(function(){var e=this,t=e._self._c;return t("div",[e.isUserPremium?[t("a",{staticClass:"flex items-center gap-2 my-2 link",attrs:{href:"https://saucenao.com/search.php?url=".concat(e.mediaUrl),target:"_blank",rel:"noopener nofollow"}},[t("span",{staticClass:"sr-only"},[e._v(" Search source of the post via SauceNAO ")]),e._v(" "),t("SearchIcon",{staticClass:"w-5 h-5 icon"}),e._v("\n\n      SauceNAO\n    ")],1)]:[t("NuxtLink",{staticClass:"flex items-center gap-2 my-2 link",attrs:{to:"/premium"}},[t("span",{staticClass:"sr-only"},[e._v(" Search source of the post via SauceNAO ")]),e._v(" "),t("SearchIcon",{staticClass:"w-5 h-5 icon"}),e._v("\n\n      SauceNAO\n    ")],1)]],2)}),[],!1,null,null,null);t.default=component.exports},227:function(e,t,r){"use strict";r.r(t);r(10);var o=r(3),n=r(4),l=(r(66),r(5)),c=r(86),d=r(212);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={components:{DownloadIcon:c.e},props:{mediaName:{type:String,required:!0},mediaUrl:{type:String,required:!0}},computed:v({},Object(l.c)("premium",["isUserPremium"])),methods:v(v({},Object(l.b)(["simpleFetch"])),{},{downloadBlobToDevice(e,t){var r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.target="_blank",o.download=t,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)},fetchUrlIntoBlob(){var e=this;return Object(o.a)((function*(){var t=d.a.proxyUrl(e.mediaUrl),r=yield e.simpleFetch({url:t,options:{responseType:"blob"}});return{RESPONSE:r,RESPONSE_BLOB:r.data}}))()},downloadMedia(){var e=this;return Object(o.a)((function*(){try{var{RESPONSE:t,RESPONSE_BLOB:r}=yield e.fetchUrlIntoBlob(),o=t.headers["content-type"].split("/")[1],n=e.mediaName+"."+o;e.downloadBlobToDevice(r,n)}catch(t){e.$toast.error('Could not download post: "'.concat(t.message,'"'))}}))()}})},y=r(7),component=Object(y.a)(m,(function(){var e=this,t=e._self._c;return t("div",[e.isUserPremium?[t("button",{staticClass:"flex items-center gap-2 my-2 link",attrs:{type:"button"},on:{click:e.downloadMedia}},[t("DownloadIcon",{staticClass:"w-5 h-5 icon"}),e._v("\n\n      Download\n    ")],1)]:[t("NuxtLink",{staticClass:"flex items-center gap-2 my-2 link",attrs:{to:"/premium"}},[t("DownloadIcon",{staticClass:"w-5 h-5 icon"}),e._v("\n\n      Download\n    ")],1)]],2)}),[],!1,null,null,null);t.default=component.exports},228:function(e,t,r){"use strict";r.r(t);r(10);var o=r(3),n=r(4),l=r(5),c=r(86);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={props:{post:{type:Object,required:!0}},components:{HeartIcon:c.h},computed:f(f(f({},Object(l.c)("user",["getSavedPosts"])),Object(l.c)("premium",["isUserPremium"])),{},{isPostSaved(){return this.getSavedPosts.some((e=>e.id===this.post.id))}}),methods:f(f({},Object(l.b)("user",["addPostToSavedPosts","removePostFromSavedPosts"])),{},{savePostClickHandler(){var e=this;return Object(o.a)((function*(){e.isUserPremium?e.isPostSaved?yield e.removePostFromSavedPosts({postId:e.post.id}):yield e.addPostToSavedPosts({post:e.post}):yield e.$router.push({name:"premium"})}))()}})},m=r(7),component=Object(m.a)(v,(function(){var e=this,t=e._self._c;return t("button",{staticClass:"flex items-center gap-2 my-2 link group",attrs:{type:"button"},on:{click:e.savePostClickHandler}},[t("span",{staticClass:"sr-only"},[e._v(" Save post ")]),e._v(" "),t("HeartIcon",{staticClass:"w-5 h-5 icon",class:{"fill-current text-red-500 group-hover:text-red-400":e.isPostSaved}}),e._v("\n\n  Save\n")],1)}),[],!1,null,null,null);t.default=component.exports},229:function(e,t,r){"use strict";r.r(t);var o={methods:{beforeEnter(element){requestAnimationFrame((()=>{element.style.maxHeight="0px",element.style.opacity=0}))},enter(element){requestAnimationFrame((()=>{element.style.maxHeight="".concat(element.scrollHeight,"px"),element.style.opacity=1}))},leave(element){requestAnimationFrame((()=>{element.style.maxHeight="0px",element.style.opacity=0}))}}},n=(r(218),r(7)),component=Object(n.a)(o,(function(){var e=this;return(0,e._self._c)("transition",{attrs:{name:"collapse"},on:{"before-enter":e.beforeEnter,enter:e.enter,leave:e.leave}},[e._t("default")],2)}),[],!1,null,null,null);t.default=component.exports}}]);